---
layout: post
title: "UNIX的故事"
category: 
- Unix
- 操作系统
- 计算机故事
tags: ["Unix","计算机历史","IT趣闻","操作系统"]
---

* content
{:toc}



 　　在计算机领域，Unix一直是作为高端平台而出现的。几年以前，只有在大型机构的专用机房中才能接触到它们，甚至稍小一些的机构也负担不起购买Unix工作站的费用。只有很少的使用者才有机会接触和使用Unix，能管理和维护 Unix系统的计算机专业人员就更少了，这就使得Unix总是披着一层神秘的面纱。

UNIX操作系统（尤尼斯），是一个强大的多用户、多任务操作系统，支持多种处理器架构，按照操作系统的分类，属于分时操作系统，最早由KenThompson、Dennis Ritchie和Douglas McIlroy于1969年在AT&T的贝尔实验室开发。目前它的商标权由国际开放标准组织所拥有，只有符合单一UNIX规范的UNIX系统才能使用UNIX这个名称，否则只能称为类UNIX（UNIX-like）。

　　Unix操作系统的历史漫长而曲折，它的第一个版本是1969年由Ken Thompson在AT&T贝尔实验室实现的，运行在一台DEC PDP-7计算机上。这个系统非常粗糙，与现代Unix相差很远，它只具有操作系统最基本的一些特性。后来Ken Thompson和Dennis Ritchie使用C语言对整个系统进行了再加工和编写，使得Unix能够很容易的移植到其他硬件的计算机上。从那以后，Unix系统开始了令人瞩目的发展。
<!-- more -->
<!-- TOC -->

# Unix诞生

1965年时，贝尔实验室（Bell Labs）加入一项由通用电气（General Electric）和麻省理工学院（MIT）合作
的计划；该计划要建立一套多使用者、多任务、多层次（multi－user、multi－processor、multi－level）的MULTICS操作系统。直到1969年，因MULTICS计划的工作进度太慢，该计划被停了下来。

![PDP－7计算机](/media/images/PDP-7.jpg)

当时，Ken Thompson（后被称为UNIX之父）已经有一个称为《星际旅行(Space Travel)》的游戏在GE－635的机器上跑，但是反应非常慢，正巧他发现了一部被闲置的PDP－7（Digital的主机），Ken Thompson和Dernis Ritchie就将"星际旅行"的程序移植到PDP－7上。

而这部PDP－7就此在整个计算机历史上留下了芳名。


UNIX诞生于贝尔实验室，它由肯 汤普森写于1969年，之所以肯 汤普森能写出这样一个出色的操作系统，是因为他参加了当时雄心勃勃的 Multics计划，这个计划是由麻省理工学院，贝尔实验室与通用电气公司联合开发的操作系统计划，这个操作系统目标要同时处理一千为用户的请求。但是由于当时技术水平，最后连三位用户都应付不了，最后以失败告终。贝尔实验室退出了这个计划，赔了很多钱。虽然这个计划失败了。

但是参加这个计划的肯 汤普森从中学到了重要的教训，这个教训使得他轻松地编写出了UNIX。

# Unix流行

  UNIX一诞生就迅速的在贝尔实验室里风靡起来，大家都喜欢用这个操作系统。注意当时DOS还没有，比尔盖茨还在高中学数理化，主流操作系统是电脑生产厂商自带的，当时是小型机的世界，而小型机霸主是DEC公司，当时个人计算机的概念还没产生。

1973年 肯 汤普森 在ACM操作系统研讨会上发表了一篇关于UNIX的论文。贝尔实验室外的人们才认识了这款优秀的操作系统，之后UNIX迅速在美国以及全世界的其他国家流行起来。当时还没有网络，UNIX传播的方式主要通过磁带与软盘。人们通过这种方式笨拙的方式传播UNIX。

UNIX的广泛传播导致UNIX的商业价值开始显现出来，贝尔实验室隶属的美国电话电报公司显而易见的是UNIX的合法拥有者，但是美国电话电报公司当时却没有商业化UNIX，UNIX用户不用向美国电话电报公司支付版税。这听起来很奇怪，因为公司都是以利益为导向的，美国电话电报公司不可能没有发现UNIX巨大的商业价值，事实上它也是身不由己。

当时的美国电话电报公司垄断了美国所有点电话电报业务，使得美国政府不得不对其加以限制，规定美国电话电报公司不能涉足电讯以外的行业。而操作系统属于软件，所以美国电话电报公司不能出售UNIX，这导致了UNIX从开始诞生到1983年都是免费操作系统，当然既然免费，美国电话电报公司也不提供技术支持。


UNIX最重要的发展就是在从1973年到1983年这十年间，十年是一个分水岭。这十年见证了UNIX繁荣昌盛的过程。美国加州大学伯克利分校显然对UNIX有着非常重要的贡献，自从比尔乔伊（不是比尔盖茨，他1975年刚从哈佛退学，以卖BASIC为生） 1975年将PASCAL编译系统整合在UNIX系统里，并且以BSD命名进行发布，BSD成为了UNIX发展过程中的一个里程碑，伯克利成为了UNIX新技术的前沿阵地，伯克利大学为了发展UNIX成立了计算机研究小组，世界上优秀的程序员都参与到BSD系统的改进之中，不断反馈BUG改进UNIX。

BSD逐渐代替美国电话电报公司的UNIX成为人们追逐的对象。随着计算机网络的发展，1983年 伯克利大学将TCP／IP协议整合到了UNIX，发布了4.2BSD，随着BSD UNIX的发展，美国电话电报公司心里越来越不爽，虽然他也将BSD优秀的代码吸收带自己的系统中，但是在计算机界，人们普遍一个共识就是BSD才是最先进的UNIX系统，并且开发的人最多，最有保证。美国电话电报公司虽然不爽，但是在1983年之前，因为受反垄断发的限制，他们没有一点办法。

# Unix由盛转衰

    1983年发生的一件事将彻底改变UNIX的命运，在1983年之前UNIX一直是一个开源的操作系统，版税很低，人们开发他的热情很高，UNIX发展势头很好。1983年，美国政府依据美国反垄断法肢解了美国电话电报公司，因为美国电话电报公司分成了几个公司，对行业不构成垄断了，所以不受发垄断发的限制，可以从事软件行业。所以1983年后，美国电话电报公司成立了UNIX系统实验室，强势进入了计算机行业。为了达到商业目的，以及遏制BSD，美国电话电报公司修改了UNIX的许可条款，不断提高授权费用。到1988年，UNIX已经变得非常昂贵。这时伯克利大学的BSD虽然还是免费使用，并且发布全部代码。但是并经BSD是脱胎与美国电话电报公司的UNIX，所以使用BSD操作系统的人也不得不向美国电话电报公司支付版税，高昂的费用使得很多个人以及小企业望而却步。

 UNIX诞生于小型计算机，发展于小型计算机上。

 但是当时代变迁，科技进步，个人计算机逐渐流行，UNIX虽然优秀，但是高昂的版税是个人计算机不能承受的，随着时间的推移UNIX失去了进军个人计算机市场的机会。这时正是比尔盖茨发家的时候，BASIC解译器搭上了个人计算机的顺风车，快速成长，逐渐微软BASIC成为个人计算机公认的市场标准，1980年，IBM公司选中微软公司为其新PC机编写关键的操作系统软件，这就是MS-DOS操作系统，由于与IBM个人计算机的紧密关系,MS-DOS逐渐成了个人计算机标准操作系统。


# Unix版权之争

## 早期UNIX

　　由于此时AT&T还没有把Unix作为它的正式商品，因此研究人员只是在实验室内部使用并完善它。正是由于Unix是被作为研究项目，其他科研机构和大学的计算机研究人员也希望能得到这个系统，以便进行自己的研究。AT&T以分发许可证的方法，对Unix仅仅收取很少的费用，大学和研究机构就能获得Unix的源代码以进行研究。Unix的源代码被散发到各个大学，一方面使得科研人员能够根据需要改进系统，或者将其移植到其他的硬件环境中去，另一方面培养了懂得Unix使用和编程的大量的学生，这使得Unix的普及更为广泛。

　　由于操作系统的开发相当困难，只有少数的计算机厂商，如IBM、Digital等大型公司，才拥有自己的操作系统，而其他众多生产计算机的硬件厂商则采用别人开发的操作系统。因为Unix不需要太多的花费，因此很多厂商就选择了Unix作为他们生产的计算机使用的操作系统。他们把Unix移植到自己的硬件环境下，而不必从头开 发一个操作系统。

　　到了70年代末，在Unix发展到了版本6之后，AT&T认识到了Unix的价值，成立了Unix系统实验室（Unix System Lab,USL）来继续发展Unix。因此AT&T一方面继续发展内部使用的Unix版本7，一方面由USL开发对外正式发行的Unix版本，同时AT&T也宣布对Unix产品拥有所有权。几乎在同时，加州大学伯克利分校计算机系统研究小组（CSRG）使用Unix对操作系统进行研究，因此他们的研究成果就反映在他们使用的Unix中。

　　加州大学伯克利分校Unix的改进相当多，增加了很多当时非常先进的特性，包括更好的内存管理，快速且健壮的文件系统等，大部分原有的源代码都被重新写过，以支持这些新特性。很多其他Unix使用者，包括其他大学和商业机构，都希望能得到CSRG改进的Unix系统。因此CSRG中的研究人员把他们的Unix组成一个完整的Unix系统──BSD Unix（Berkeley Software Distribution），向外发行。

## BSD Unix

　　BSD Unix在Unix的历史发展中具有相当大的影响力，被很多商业厂家采用，成为很多商用Unix的基础,而AT&T与其同时存在的Unix版本的影响就小得多。同时很多研究项目也是以BSD Unix为研究系统，例如美国国防部的项目─ARPANET，ARPANET今天发展成为了Internet，而BSD Unix中最先实现了TCP/IP，使Internet和Unix紧密结合在一起。
　　而AT&T的Unix系统实验室，同时也在不断改进他们的商用Unix版本，直到他们吸收了BSD Unix中已有的各种先进特性，并结合其本身的特点，推出了Unix System V版本之后，情况才有了改变。从此以后，BSD Unix和Unix System V形成了当今Unix的两大主流，现代的Unix版本大部分都是这两个版本的衍生产品。

##  Unix System V

　　Unix的版本号表示方式比较复杂，各种不同的Unix版本有自己的版本标识方式，如最早AT&T开发的内部Unix使用简单的顺序号来标识版本，从V 1到V 7。BSD使用主版本加次版本的方法标识，如4.2BSD，4.3BSD，在原始版本的基础上还有派生版本，这些版本通常有自己的名字，如4.3BSD-Net/1，4.3BSD-Net/2。
　　AT&T使用罗马数字来标识他们的对外发布的Unix版本，用Release来表示次版本。如System V Release 4（简写为SVR4）标识AT&T的Unix System V的第四次发布的版本。

## AT&&T商业版权之争

　　其他商业公司的Unix使用自己的版本标识，如Sun的Solaris 2.6，IBM的AIX 4.0等。虽然AT&T的Unix System V也是非常优秀的Unix版本，但是BSD Unix在Unix领域内的影响更大。

　　AT&T的Unix系统实验室一直关注着BSD的发展，在1992年，Unix系统实验室指控BSDI── 一家发行商业BSD Unix的公司，违反了AT&T的许可权，发布自己的Unix版本，并进一步指控伯克利计算机系统研究组泄漏了Unix的商业机密（此时的4.3 BSD中来自AT&T Unix的代码已经不足10%）。

　　这个官司影响了很多Unix厂商，使他们不得不从BSD Unix转向Unix System V,以避免法律问题。以至于当今大多数商业Unix版本都是基于Unix System V的 。

## Novell的关键贡献

这件有关Unix版权的案子直到Unix系统实验室被ATT卖给了Novell公司后才得以解决，Novell不打算陷入这样的法律纷争中，因此就采用了比较友好的做法。伯克利的CSRG被允许自由发布BSD，但是其中来自于AT&T的代码必须完全删除。

因此CSRG就对他们最新的4.4BSD进行了修改，删除了那些来自于AT&T的源代码，发布了4.4 BSD Lite版本（该系统是不完整的，尤其对于英特尔386体系的计算机系统）。

由于这个版本不存在法律问题，4.4BSD Lite成为了现代BSD系统的基础版本。

Novell的比较友善的做法还不止对BSD，他把自己的Unix改名为Unixware，而将Unix商标赠送给X/Open── 一个由众多Unix厂家组成的联盟，这样这个联盟内的所有成员均可使用Unix商标。

从此之后，Unix不再是专有产品了。后来Novell由于自身的经营问题，又将Unixware卖给SCO公司。

## BSD Unix的后时代影响

同时，由于BSD系统已经十分成熟，作为对操作系统进行研究的目标已经达到，伯克利计算机系统研究组（CSRG）在发布了4 .4BSD-lite2之后就解散了，小组的科研人员有些进入了Unix商业公司，有些继续进行其他计算机领域的研究。此时，严格意义上的Unix System V和BSD Unix都不复存在了，存在的只是他们的各种后续版本。


回顾Unix的发展，可以注意到Unix与其他商业操作系统的不同之处主要在于其开放性。在系统开始设计时就考虑了各种不同使用者的需要，因而Unix被设计为具备很大可扩展性的系统。

由于它的源码被分发给大学，从而在教育界和学术界影响很大，进而影响到商业领域中。

大学生和研究者为了科研目的或个人兴趣在Unix上进行各种开发，并且不计较金钱利益，将这些源码公开，互相共享，这些行为极大丰富了Unix本身。

## Unix的统一与分裂

　　由于Unix的开放性，另一方面就使得存在多个不同的Unix版本。由于不同的Unix使用稍有差别的文件、目录结构，提供略有不同的系统调用，因此对系统管理、以及为Unix开发可移植的应用程序带来一定的困难。例如System V和BSD的很多系统调用就存在不同。在Unix历史发展中也存在将Unix完全统一的努力，例如POSIX 规范就是各个Unix厂商经过协商，达成的Unix操作系统应该遵循的一套基本系统调用的规定。

然而由于存在多个Unix系统，各个厂商的意见很不统一，因此POSIX规范制定的很宽松，甚至WindowsNT中也存在一个POSIX子系统。事实上，只要各个Unix之间协调发展，不故意为了商业目的而人为的制造系统差异，就能够保持各个Unix之间不致具有太大的差别，保持Unix系统的多样性比只有唯一的一个Unix系统更能够促进技术的进步和发展，企图人为的统一Unix的想法只能是某一个Unix厂商的一厢情愿。


## 关于伯克利《清洁室》 行动


在美国电话电报公司强势商业化UNIX后，为了保持代码的纯洁，脱离美国电话电报公司的许可证限制，伯克利大学的计算机研究小组开始了“清洁室”行动，目的就是剔除BSD中UNIX的代码，发布纯净的BSD代码，这项计划一直到1991年才完成，这时微软已经完全占据了个人计算机的操作系统市场，并且有向小型机进军的趋势，UNIX可以说是太晚了。

“清洁室”完成后，有公司开始以极低的版税销售BSD，具有代表性的公司就是BSDI，直接挑战美国电话电报公司的商业化UNIX，这就导致美国电话电报公司的极度愤怒，1992年美国电话电报公司将BSDI以及伯克利大学全都告上了法庭，理由是伯克利大学以及BSDI侵犯了UNIX的版权。而伯克利大学反诉讼美国电话电报公司，理由是美国电话电报公司的UNIX吸收了BSD开发的代码，但是删除了BSD的版权说明。

## Unix版权指控与衰落

软件版权本来就不是很清楚，清官难断家务事，官司很快陷入了僵局。UNIX的前途更加迷茫，官司打了两年也没啥结果。这就导致了UNIX开发人员失去了对UNIX的信心，谁会为一个不知道前途的操作系统再浪费自己的热情。这个官司使得UNIX雪上加霜，虽然1994年经过协商双方最后都达成了妥协，但是UNIX已经元气大伤了。虽然BSD保住了开源的优势，商业版unix也正常发行，但是从此UNIX进入了分化的阶段，随着伯克利计算机小组解散，伯克利停止开发BSD，BSD逐渐分化成了三股力量，FreeBSD，OpenBSD，以及NetBSD。商业版UNIX也分化成互不兼容的版本，这样分散的UNIX的开发力量，UNIX逐渐走向衰落。在计算机发展的关键的几年，UNIX没有抓住机遇，而是陷入各种危机，导致了UNIX的衰落，而微软正是抓住了这种机遇成就了庞大的微软帝国，其实微软早期的MS－DOS操作系统和UNIX相比简直就是小巫见大巫，其实MS－DOS也根本就不是微软开发的，而是他花钱从别人手里买的。直到1995年，微软推出了独立于DOS系统的Windows 95 操作系统才正真有了自己的操作系统。


# Unix的彻底衰落

    虽然UNIX衰落了，但是UNIX的影响是任意一款操作系统都无法比拟的。从UNIX兴盛到衰落我们能学到什么呢！任何事情都不是一成不变的，机会与挑战并存。在现代科技飞速的发展中，无论你有多强，抓不住机遇就会被历史所淘汰。操作系统是这样，计算机也是这样，IBM当年就是没有抓住小型机的发展机遇被DEC公司占领小型机很多年，随后DEC公司没有抓住个人计算机的机遇被IBM以及其他厂商搞的破产，最后被康柏公司收购后并入惠普。其实人生也是这样，任何时间都不能松懈，果断睿智的人才可以成功，但是如果成功后骄傲自大成功很快会变成失败。就像一句话说的好，人生就像俄罗斯方块积累的成功会消失，犯下的错误则会积累。UNIX带给我们很多，这样优秀的操作系统没有走进千家万户也是让人有点感伤，希望后起之秀linux能够吸取UNIX的教训，最后将优秀的操作系统发扬广大，造福人类！


# Linux的崛起

 在UNIX衰落与微软迅速膨胀的同时，一股新兴的力量正在逐渐发展，这就是linux。

 1991年，linus买了一台自己的个人计算机，他不喜欢DOS，而是更喜欢UNIX。但是又买不起UNIX。所以导致了linux的诞生。

 其实在linus写linux的时候，他根本不知道“清洁室”行动产生的X86/BSD完全可以在他的机器上运行，linus最后回忆说如果他知道有这样一个免费的UNIX系统，他就不会编写linux了，这也许就是历史的巧合。

 linux一诞生就引起了全世界黑客的注意，关于UNIX的法律诉讼严重摧毁了他们对UNIX的热情，这时正好有一个干净的系统让自己施展身手，不需要为版权而苦恼，大批的优秀程序员投入了linux的开发之中。正在美国电话电报公司与伯克利大学为了UNIX归属权打的火热的时候，linus与Minix的编写着Andrew S. Tanenbaum也炒的火热。Andrew S. Tanenbaum坚持的认为微内核是操作系统的发展趋势，而Linux采用的单内核太老土了。

 而linus认为linux的单内核效率高，完全不输于微内核。两个人在邮件上展开了扩日持久的大战，当然这些邮件所有人都可以看到。许多linux后来的开发着都是被这次技术论战吸引过来的。而UNIX的版权之争完全是幕后的，纯法律的争斗。

 linux正是这种开放的态度吸引了大量的人才。
